<!-- /templates/customers/wholesale-signup.liquid -->

<div class="admin-page-wrap">
  <div class="container">
    <div class="register-form-wrapper">

      <header class="section-header">
        <h1 class="text-center">wholesale sign up</h1>
        <hr class="hr--small">
      </header>

      <div class="form-vertical">
        {% form 'create_customer' %}
          {{ form.errors | default_errors }}
          <!-- One "tab" for each step in the form: -->
          <div class="tab">
            <h2 class="mb-4">Step one</h2>
            <label for="Email" class="hidden-label">{{ 'customer.register.email' | t }}</label>
            <input type="email" name="customer[email]" id="Email" class="input-required input-full{% if form.errors contains 'email' %} error{% endif %}" placeholder="{{ 'customer.register.email' | t }}" {% if form.email %} value="{{ form.email }}"{% endif %} autocorrect="off" autocapitalize="off">

            <div class="row">
              <div class="col-lg-6">
                <label for="FirstName" class="hidden-label">{{ 'customer.register.first_name' | t }}</label>
                <input type="text" name="customer[first_name]" id="FirstName" class="input-full input-required" placeholder="{{ 'customer.register.first_name' | t }}" {% if form.first_name %}value="{{ form.first_name }}"{% endif %} autocapitalize="words" autofocus>
              </div>

              <div class="col-lg-6">
                <label for="LastName" class="hidden-label">{{ 'customer.register.last_name' | t }}</label>
                <input type="text" name="customer[last_name]" id="LastName" class="input-full input-required" placeholder="{{ 'customer.register.last_name' | t }}" {% if form.last_name %}value="{{ form.last_name }}"{% endif %} autocapitalize="words">
              </div>
            </div>

            <fieldset class="form-group">
              <legend class="col-form-label">
                Where will you be selling our products?
                <small>(check all that apply)</small>
              </legend>

              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" name="customer[note][Selling on Amazon]" id="sell-to-Amazon" value="Yes">
                <label class="custom-control-label" for="sell-to-Amazon">Amazon.com </label>
              </div>
              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" name="customer[note][Selling on Ebay]" id="sell-to-Ebay" value="Yes">
                <label class="custom-control-label" for="sell-to-Ebay">Ebay.com </label>
              </div>
              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" name="customer[note][Selling on Walmart.com]" id="sell-to-Walmart" value="Yes">
                <label class="custom-control-label" for="sell-to-Walmart">Walmart.com </label>
              </div>
              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" name="customer[note][Selling on Jet]" id="sell-to-Jet" value="Yes">
                <label class="custom-control-label" for="sell-to-Jet">Jet.com </label>
              </div>
              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" name="checkbox5" id="sell-to-Other" value="Yes">
                <label class="custom-control-label" for="sell-to-Other">Other online reselling marketplaces </label>
                <div class="dependent-on-checkbox form-group">
                  <input type="text" name="customer[note][Selling on other online reselling marketplaces]" id="OtherURL" class="form-control py-3 col-md-6" placeholder="Marketplace URL">
                </div>
              </div>
              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" name="checkbox6" id="sell-to-OnlineStore" value="Yes">
                <label class="custom-control-label" for="sell-to-OnlineStore">An online store that I own or work for </label>
                <div class="dependent-on-checkbox form-group">
                  <input type="text" name="customer[note][Selling on an online store that I own or work for]" id="OnlineStoreURL" class="form-control py-3 col-md-6" placeholder="Online Store URL">
                </div>
              </div>
              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" name="checkbox7" id="sell-to-PhysicalStore" value="Yes">
                <label class="custom-control-label" for="sell-to-PhysicalStore">A physical retail location (coffee shop, boutique, gourmet food store, etc) </label>
                <div class="dependent-on-checkbox form-group">
                  <input type="text" name="customer[note][Selling at a physical retail location]" id="PhysicalStoreURL" class="form-control py-3 col-md-6" placeholder="Physical Store Address">
                </div>
              </div>
            </fieldset>

            <label for="TIN" class="hidden-label">Tax ID Number</label>
            <input type="text" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1');" name="customer[note][Tax ID]" id="TIN" class="input-full input-required" placeholder="Tax ID Number" {% if form.TIN %}value="{{ form.TIN }}"{% endif %} autocapitalize="words" autofocus>

            <label for="CreatePassword" class="hidden-label">{{ 'customer.register.password' | t }}</label>
            <input type="password" name="customer[password]" id="CreatePassword" class="input-required input-full{% if form.errors contains 'password' %} error{% endif %}" placeholder="{{ 'customer.register.password' | t }}">

            <div>
              <input type="hidden" name="customer[accepts_marketing]" value="" />
              <input type="checkbox" name="customer[accepts_marketing]" checked="checked" />
              Subscribe to stay updated with new products and offers!
            </div>
          </div>
          <div class="tab">
            <h2 class="mb-4">Step two</h2>

            <div id="AddAddress">

              <label for="AddressCompanyNew">{{ 'customer.addresses.company' | t }}</label>
              <input type="text" id="AddressCompanyNew" class="input-full input-required" name="customer[note][Company]" value="{{form.company}}" autocapitalize="words">

              <label for="AddressAddress1New">{{ 'customer.addresses.address1' | t }}</label>
              <input type="text" id="AddressAddress1New" class="input-full input-required" name="customer[note][Address 1]" value="{{form.address1}}" autocapitalize="words">

              <label for="AddressAddress2New">{{ 'customer.addresses.address2' | t }}</label>
              <input type="text" id="AddressAddress2New" class="input-full" name="customer[note][Address 2]" value="{{form.address2}}" autocapitalize="words">

              <div class="grid grid--small">
                <div class="grid__item large--one-half">
                  <label for="AddressCityNew">{{ 'customer.addresses.city' | t }}</label>
                  <input type="text" id="AddressCityNew" class="input-full input-required" name="customer[note][City]" value="{{form.city}}" autocapitalize="words">
                </div>

                <div class="grid__item large--one-half">
                  <label for="AddressCountryNew">{{ 'customer.addresses.country' | t }}</label>
                  <select id="AddressCountryNew" class="input-full input-required" name="customer[note][Country]" data-default="{{form.country}}">{{ all_country_option_tags }}</select>
                </div>

                <div class="grid__item" id="AddressProvinceContainerNew" style="display:none">
                  <label for="AddressProvinceNew">{{ 'customer.addresses.province' | t }}</label>
                  <select id="AddressProvinceNew" class="input-full input-required" name="customer[note][State - Province - Region]" data-default="{{form.province}}"></select>
                </div>

                <div class="grid__item large--one-half">
                  <label for="AddressZipNew">{{ 'customer.addresses.zip' | t }}</label>
                  <input type="text" id="AddressZipNew" class="input-full input-required" name="customer[note][Zip - Postal Code]" value="{{form.zip}}" autocapitalize="characters">
                </div>

                <div class="grid__item large--one-half">
                  <label for="AddressPhoneNew">{{ 'customer.addresses.phone' | t }}</label>
                  <input type="tel" id="AddressPhoneNew" class="input-full input-required" name="customer[note][phone]" value="{{form.phone}}">
                </div>
              </div>
            </div>
            <p><input type="submit" class="btn btn--full mt-3" value="Submit"></p>
          </div>
          <div style="overflow:auto;">
            <div style="float:right;">
              <button type="button" class="btn btn--full mt-2" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
              <button type="button" class="btn btn--full mt-2" id="nextBtn" onclick="nextPrev(1)">Save & Continue</button>
            </div>
          </div>
          <!-- Circles which indicates the steps of the form: -->
          <div style="text-align:center;margin-top:40px;">
            <span class="step"></span>
            <span class="step"></span>
            <span class="step"></span>
            <span class="step"></span>
          </div>
        {% endform %}
      </div>
      
    </div>
  </div>
</div>

<script>
  var currentTab = 0; // Current tab is set to be the first tab (0)
  showTab(currentTab); // Display the current tab

  function showTab(n) {
    // This function will display the specified tab of the form...
    var x = document.getElementsByClassName("tab");
    x[n].style.display = "block";
    //... and fix the Previous/Next buttons:
    if (n == 0) {
      document.getElementById("prevBtn").style.display = "none";
    } else {
      document.getElementById("prevBtn").style.display = "inline";
    }
    if (n == (x.length - 1)) {
      document.getElementById("nextBtn").style.display = "none";
      document.getElementById("prevBtn").style.display = "none";
    } else {
      document.getElementById("nextBtn").innerHTML = "Next";
    }
    //... and run a function that will display the correct step indicator:
    fixStepIndicator(n)
  }

  function nextPrev(n) {
    // This function will figure out which tab to display
    var x = document.getElementsByClassName("tab");
    // Exit the function if any field in the current tab is invalid:
    if (n == 1 && !validateForm()) return false;
    // Hide the current tab:
    x[currentTab].style.display = "none";
    // Increase or decrease the current tab by 1:
    currentTab = currentTab + n;
    // if you have reached the end of the form...
    if (currentTab >= x.length) {
      // ... the form gets submitted:
      document.getElementById("regForm").submit();
      return false;
    }
    // Otherwise, display the correct tab:
    showTab(currentTab);
  }

  function validateForm() {
    // This function deals with validation of the form fields
    var x, y, i, valid = true;
    x = document.getElementsByClassName("tab");
    y = x[currentTab].getElementsByClassName("input-required");
    // A loop that checks every input field in the current tab:
    for (i = 0; i < y.length; i++) {
      // If a field is empty...
      if (y[i].value == "") {
        // add an "invalid" class to the field:
        y[i].className += " invalid";
        // and set the current valid status to false
        valid = false;
      }
    }
    // If the valid status is true, mark the step as finished and valid:
    if (valid) {
      document.getElementsByClassName("step")[currentTab].className += " finish";
    }
    return valid; // return the valid status
  }

  function fixStepIndicator(n) {
    // This function removes the "active" class of all steps...
    var i, x = document.getElementsByClassName("step");
    for (i = 0; i < x.length; i++) {
      x[i].className = x[i].className.replace(" active", "");
    }
    //... and adds the "active" class on the current step:
    x[n].className += " active";
  }


  $(function () {
      $('input[name="customer[note][Selling on other online reselling marketplaces]"], input[name="customer[note][Selling on an online store that I own or work for]"], input[name="customer[note][Selling at a physical retail location]"]').hide();

      //show it when the checkbox is clicked
      $('input[name="checkbox5"]').on('click', function () {
          if ($(this).prop('checked')) {
              $('input[name="customer[note][Selling on other online reselling marketplaces]"]').fadeIn();
          } else {
              $('input[name="customer[note][Selling on other online reselling marketplaces]"]').hide();
          }
      });
      $('input[name="checkbox6"]').on('click', function () {
          if ($(this).prop('checked')) {
              $('input[name="customer[note][Selling on an online store that I own or work for]"]').fadeIn();
          } else {
              $('input[name="customer[note][Selling on an online store that I own or work for]"]').hide();
          }
      });
      $('input[name="checkbox7"]').on('click', function () {
          if ($(this).prop('checked')) {
              $('input[name="customer[note][Selling at a physical retail location]"]').fadeIn();
          } else {
              $('input[name="customer[note][Selling at a physical retail location]"]').hide();
          }
      });
  });
</script>

